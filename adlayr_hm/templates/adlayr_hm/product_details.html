{% extends 'base.html'  %}

{% block title %}
    <title>AdLaYr HealthMix | Product Details</title>
{% endblock %}

{% block main %}

  {% include "adlayr_hm/navbar.html" %}

  <!-- Login Alert -->
  <div id="loginAlert" class="glass-alert">
    <div class="glass-bubble">
      <span class="glass-emoji">üîê‚ú®</span>

      <div class="glass-text">
        <strong>Please login</strong><br>
        to add this item to your cart üõí

        <!-- CTA -->
        <a href="{% url 'login' %}" class="glass-login-btn">
          Login now ‚Üí
        </a>
      </div>
    </div>
  </div>

  <div class="container-fluid" id="pd-container">
    <div class="container">
      <div class="row align-items-center g-5" id="pd-row">

        <!-- Product Image Section -->
        <div class="col-lg-6 text-center">
          <img
            id="mainImage"
            src="{{ product_images.0.image.url }}"
            class="img-fluid product-main-img fade-img"
            loading="lazy"
          />

          <!-- Thumbnails -->
          <div class="d-flex justify-content-center gap-3 mt-4">
            {% for image in product_images %}
              <img
                src="{{ image.image.url }}"
                class="thumb {% if forloop.first %} active {% endif %}"
                loading="lazy"
                onclick="changeImage(this)"
              >
            {% endfor %}
          </div>
        </div>

        <div class="col-lg-6 text-white">
          <h1 class="product-title">{{ product.name }}</h1>

          <div class="d-flex align-items-center gap-3 mb-3">
            <span class="price">‚Çπ {{ product.discounted_price }}</span>
            <div class="rating">
              ‚òÖ‚òÖ‚òÖ‚òÖ‚òÜ
              <span class="review-text">8 Reviews</span>
            </div>
          </div>

          <p class="product-desc">
            {{ product.description }}
          </p>

          <p class="meta"><strong>Ingrediants:</strong> {{ product.ingredients }}</p>
          <p class="meta"><strong>Health Benefits:</strong> {{ product.benefits }}</p>

          <form method="post">
              {% csrf_token %}

            <div class="d-flex align-items-center gap-3 mt-4">

                <div class="quantity-box">
                  <button type="button" onclick="updateQty(-1)">-</button>
                  <input type="text" name="quantity" id="qty" value="1" readonly>
                  <button type="button" onclick="updateQty(1)">+</button>
                </div>

                {% if not request.user.is_authenticated %}
                  <button type="button" class="btn btn-gold" onclick="showLoginAlert()">
                    <i class="bi bi-cart-fill"></i> ADD TO CART
                  </button>
                {% else %}
                  <button type="submit" class="btn btn-gold">
                    <i class="bi bi-cart-fill"></i> ADD TO CART
                  </button>
                {% endif %} 

              <button class="wishlist-btn">
                <i class="bi bi-heart"></i>
              </button>
            </div>
          </form>
        </div>

      </div>
    </div>
  </div>

{% endblock %}